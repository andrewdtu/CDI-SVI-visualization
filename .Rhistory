knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
#
# county_SVI = read_csv(
#   url('https://svi.cdc.gov/Documents/Data/2020_SVI_Data/CSV/SVI2020_US_COUNTY.csv')
#   )%>%
#   write_csv('SVI2020_US_COUNTY.csv')
#
# census_SVI = read_csv(url('https://svi.cdc.gov/Documents/Data/2020_SVI_Data/CSV/SVI2020_US.csv'))%>%
#   write_csv('SVI2020_US.csv')
#
# CDI_data = read_csv(url('https://data.cdc.gov/api/views/g4ie-h725/rows.csv'))%>%
#   write_csv('CDI_data.csv')
census_SVI = read_csv('SVI2020_US.csv')
county_SVI = read_csv('SVI2020_US.csv')
CDI_data = read_csv('CDI_data.csv')
CDI_data%>%
filter(YearEnd == 2020)%>%
write_csv('CDI_2020.csv')%>%
filter(Topic == 'Cardiovascular Disease')
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
#
# county_SVI = read_csv(
#   url('https://svi.cdc.gov/Documents/Data/2020_SVI_Data/CSV/SVI2020_US_COUNTY.csv')
#   )%>%
#   write_csv('SVI2020_US_COUNTY.csv')
#
# census_SVI = read_csv(url('https://svi.cdc.gov/Documents/Data/2020_SVI_Data/CSV/SVI2020_US.csv'))%>%
#   write_csv('SVI2020_US.csv')
#
# CDI_data = read_csv(url('https://data.cdc.gov/api/views/g4ie-h725/rows.csv'))%>%
#   write_csv('CDI_data.csv')
census_SVI = read_csv('SVI2020_US.csv')
county_SVI = read_csv('SVI2020_US.csv')
CDI_data = read_csv('CDI_data.csv')
setwd('C:\Users\andre\OneDrive\Documents\R\stat_433\CDI-SVI-visualization')
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
#
#
# county_SVI = read_csv(
#   url('https://svi.cdc.gov/Documents/Data/2020_SVI_Data/CSV/SVI2020_US_COUNTY.csv')
#   )%>%
#   write_csv('SVI2020_US_COUNTY.csv')
#
# census_SVI = read_csv(url('https://svi.cdc.gov/Documents/Data/2020_SVI_Data/CSV/SVI2020_US.csv'))%>%
#   write_csv('SVI2020_US.csv')
#
# CDI_data = read_csv(url('https://data.cdc.gov/api/views/g4ie-h725/rows.csv'))%>%
#   write_csv('CDI_data.csv')
county_SVI = read_csv(
url('https://svi.cdc.gov/Documents/Data/2018_SVI_Data/CSV/SVI2018_US_COUNTY.csv')
)%>%
write_csv('SVI2018_US_COUNTY.csv')
#census_SVI = read_csv('SVI2020_US.csv')
county_SVI = read_csv('SVI2018_US_COUNTY.csv')
# CDI_fulldata = read_csv('CDI_data.csv')%>%
#   filter(YearEnd == 2018)%>%
#   write_csv('CDI_2018.csv')
CDI_data = read_csv('CDI_2018.csv')
CDI_data%>%
filter(Topic == 'Cardiovascular Disease')%>%
#group_by(Question)%>%
filter(Question =='Mortality from total cardiovascular diseases')%>%
filter(DataValueTypeID == 'AGEADJRATE')%>%
filter(is.na(DatavalueFootnote))
heart = CDI_data%>%
filter(Topic == 'Cardiovascular Disease')%>%
#group_by(Question)%>%
filter(Question =='Mortality from total cardiovascular diseases')%>%
filter(DataValueTypeID == 'AGEADJRATE')%>%
filter(is.na(DatavalueFootnote))%>%
select(LocationAbbr,Stratification1,DataValue)%>%
pivot_wider(names_from = Stratification1,values_from = DataValue)%>%
mutate(gender_diff = Male-Female)
# heart = CDI_fulldata%>%
#   filter(YearEnd == 2018)%>%
#   filter(Topic == 'Cardio vascular Disease')%>%
#   group_by(Question)%>%
#   count()
# CDI_fulldata%>%
#
#   group_by(Topic)%>%
#   count()
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
#
#
# county_SVI = read_csv(
#   url('https://svi.cdc.gov/Documents/Data/2020_SVI_Data/CSV/SVI2020_US_COUNTY.csv')
#   )%>%
#   write_csv('SVI2020_US_COUNTY.csv')
#
# census_SVI = read_csv(url('https://svi.cdc.gov/Documents/Data/2020_SVI_Data/CSV/SVI2020_US.csv'))%>%
#   write_csv('SVI2020_US.csv')
#
# CDI_data = read_csv(url('https://data.cdc.gov/api/views/g4ie-h725/rows.csv'))%>%
#   write_csv('CDI_data.csv')
# county_SVI = read_csv(
#   url('https://svi.cdc.gov/Documents/Data/2018_SVI_Data/CSV/SVI2018_US_COUNTY.csv')
#   )%>%
#   write_csv('SVI2018_US_COUNTY.csv')
#census_SVI = read_csv('SVI2020_US.csv')
county_SVI = read_csv('SVI2018_US_COUNTY.csv')
# CDI_fulldata = read_csv('CDI_data.csv')%>%
#   filter(YearEnd == 2018)%>%
#   write_csv('CDI_2018.csv')
CDI_data = read_csv('CDI_2018.csv')
CDI_data%>%
filter(Topic == 'Cardiovascular Disease')%>%
#group_by(Question)%>%
filter(Question =='Mortality from total cardiovascular diseases')%>%
filter(DataValueTypeID == 'AGEADJRATE')%>%
filter(is.na(DatavalueFootnote))
heart = CDI_data%>%
filter(Topic == 'Cardiovascular Disease')%>%
#group_by(Question)%>%
filter(Question =='Mortality from total cardiovascular diseases')%>%
filter(DataValueTypeID == 'AGEADJRATE')%>%
filter(is.na(DatavalueFootnote))%>%
select(LocationAbbr,Stratification1,DataValue)%>%
pivot_wider(names_from = Stratification1,values_from = DataValue)%>%
mutate(gender_diff = Male-Female)
# heart = CDI_fulldata%>%
#   filter(YearEnd == 2018)%>%
#   filter(Topic == 'Cardio vascular Disease')%>%
#   group_by(Question)%>%
#   count()
# CDI_fulldata%>%
#
#   group_by(Topic)%>%
#   count()
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(usmap)
#
#
# county_SVI = read_csv(
#   url('https://svi.cdc.gov/Documents/Data/2020_SVI_Data/CSV/SVI2020_US_COUNTY.csv')
#   )%>%
#   write_csv('SVI2020_US_COUNTY.csv')
#
# census_SVI = read_csv(url('https://svi.cdc.gov/Documents/Data/2020_SVI_Data/CSV/SVI2020_US.csv'))%>%
#   write_csv('SVI2020_US.csv')
#
# CDI_data = read_csv(url('https://data.cdc.gov/api/views/g4ie-h725/rows.csv'))%>%
#   write_csv('CDI_data.csv')
county_SVI = read_csv(
url('https://svi.cdc.gov/Documents/Data/2018_SVI_Data/CSV/SVI2018_US_COUNTY.csv')
)%>%
write_csv('SVI2018_US_COUNTY.csv')
#census_SVI = read_csv('SVI2020_US.csv')
county_SVI = read_csv('SVI2018_US_COUNTY.csv')
# CDI_fulldata = read_csv('CDI_data.csv')%>%
#   filter(YearEnd == 2018)%>%
#   write_csv('CDI_2018.csv')
CDI_data = read_csv('CDI_2018.csv')
CDI_data%>%
filter(Topic == 'Cardiovascular Disease')%>%
#group_by(Question)%>%
filter(Question =='Mortality from total cardiovascular diseases')%>%
filter(DataValueTypeID == 'AGEADJRATE')%>%
filter(is.na(DatavalueFootnote))
heart = CDI_data%>%
filter(Topic == 'Cardiovascular Disease')%>%
#group_by(Question)%>%
filter(Question =='Mortality from total cardiovascular diseases')%>%
filter(DataValueTypeID == 'AGEADJRATE')%>%
filter(is.na(DatavalueFootnote))%>%
select(LocationAbbr,Stratification1,DataValue)%>%
pivot_wider(names_from = Stratification1,values_from = DataValue)%>%
mutate(gender_diff = Male-Female)%>%
mutate(state = LocationAbbr)
plot_usmap(regions = 'states', data = heart, values = 'gender_diff')+
labs(title = "Heart disease mortality rate gender difference", subtitle = "2018 State level case per 100k")+
scale_fill_distiller(palette = 'Oranges', direction = 1, name = 'M-F case rate per 100k')+
theme(legend.position = "right")
View(county_SVI)
View(county_SVI)
state_SVI = county_SVI%>%
group_by(ST_ABBR)%>%
filter(SPL_THEMES<0)%>%
summarise(state_totpop = sum(E_TOTPOP))
View(state_SVI)
state_SVI = county_SVI%>%
group_by(ST_ABBR)%>%
filter(SPL_THEMES>0)%>%
summarise(state_totpop = sum(E_TOTPOP))
state_SVI = county_SVI%>%
group_by(ST_ABBR)%>%
filter(SPL_THEMES>0)%>%
mutate(popxsvi = E_TOTPOP*SPL_THEMES)%>%
summarise(state_totpop = sum(E_TOTPOP))%>%
summarise(state_SVI = sum(popxsvi)/state_totpop)
state_SVI = county_SVI%>%
group_by(ST_ABBR)%>%
filter(SPL_THEMES>0)%>%
mutate(popxsvi = E_TOTPOP*SPL_THEMES)%>%
summarise(state_totpop = sum(E_TOTPOP),state_SVI = sum(popxsvi)/state_totpop)
View(state_SVI)
View(CDI_data)
heart = CDI_data%>%
filter(Topic == 'Cardiovascular Disease')%>%
#group_by(Question)%>%
filter(Question =='Mortality from total cardiovascular diseases')%>%
filter(DataValueTypeID == 'AGEADJRATE')%>%
filter(is.na(DatavalueFootnote))%>%
select(LocationAbbr,Stratification1,DataValue)%>%
pivot_wider(names_from = Stratification1,values_from = DataValue)%>%
mutate(gender_diff = Male-Female)%>%
mutate(state = LocationAbbr)
plot_usmap(regions = 'states', data = heart, values = 'gender_diff')+
labs(title = "Heart disease mortality rate gender difference", subtitle = "2018 State level case per 100k")+
scale_fill_distiller(palette = 'Oranges', direction = 1, name = 'M-F case rate per 100k')+
theme(legend.position = "right")
View(CDI_data)
View(CDI_data)
View(CDI_data)
View(state_SVI)
state_SVI = county_SVI%>%
group_by(ST_ABBR)%>%
filter(SPL_THEMES>0)%>%
mutate(popxsvi = E_TOTPOP*SPL_THEMES)%>%
summarise(state_totpop = sum(E_TOTPOP),state_SVI = sum(popxsvi)/state_totpop)%>%
select(ST_ABBR,state_SVI)
heart = CDI_data%>%
filter(Topic == 'Cardiovascular Disease')%>%
#group_by(Question)%>%
filter(Question =='Mortality from total cardiovascular diseases')%>%
filter(DataValueTypeID == 'AGEADJRATE')%>%
filter(is.na(DatavalueFootnote))%>%
select(LocationAbbr,Stratification1,DataValue)%>%
pivot_wider(names_from = Stratification1,values_from = DataValue)%>%
mutate(gender_diff = Male-Female)%>%
mutate(state = LocationAbbr)%>%
left_join(state_SVI)
heart = CDI_data%>%
filter(Topic == 'Cardiovascular Disease')%>%
#group_by(Question)%>%
filter(Question =='Mortality from total cardiovascular diseases')%>%
filter(DataValueTypeID == 'AGEADJRATE')%>%
filter(is.na(DatavalueFootnote))%>%
select(LocationAbbr,Stratification1,DataValue)%>%
pivot_wider(names_from = Stratification1,values_from = DataValue)%>%
mutate(gender_diff = Male-Female)%>%
mutate(state = LocationAbbr)%>%
left_join(state_SVI, by = state)
heart = CDI_data%>%
filter(Topic == 'Cardiovascular Disease')%>%
#group_by(Question)%>%
filter(Question =='Mortality from total cardiovascular diseases')%>%
filter(DataValueTypeID == 'AGEADJRATE')%>%
filter(is.na(DatavalueFootnote))%>%
select(LocationAbbr,Stratification1,DataValue)%>%
pivot_wider(names_from = Stratification1,values_from = DataValue)%>%
mutate(gender_diff = Male-Female)%>%
mutate(state = LocationAbbr)%>%
left_join(state_SVI, by = state_SVI$state)
View(state_SVI)
View(heart)
View(state_SVI)
View(state_SVI)
state_SVI = county_SVI%>%
group_by(ST_ABBR)%>%
filter(SPL_THEMES>0)%>%
mutate(popxsvi = E_TOTPOP*SPL_THEMES)%>%
summarise(state_totpop = sum(E_TOTPOP),state_SVI = sum(popxsvi)/state_totpop)%>%
mutate(state = ST_ABBR)%>%
select(state,state_SVI)
View(state_SVI)
heart = CDI_data%>%
filter(Topic == 'Cardiovascular Disease')%>%
#group_by(Question)%>%
filter(Question =='Mortality from total cardiovascular diseases')%>%
filter(DataValueTypeID == 'AGEADJRATE')%>%
filter(is.na(DatavalueFootnote))%>%
select(LocationAbbr,Stratification1,DataValue)%>%
pivot_wider(names_from = Stratification1,values_from = DataValue)%>%
mutate(gender_diff = Male-Female)%>%
mutate(state = LocationAbbr)%>%
left_join(state_SVI)
plot_usmap(regions = 'states', data = heart, values = 'gender_diff')+
labs(title = "Heart disease mortality rate gender difference", subtitle = "2018 State level case per 100k")+
scale_fill_distiller(palette = 'Oranges', direction = 1, name = 'M-F case rate per 100k')+
theme(legend.position = "right")
View(heart)
View(state_SVI)
View(heart)
