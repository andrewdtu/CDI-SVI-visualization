---
title: "setup"
author: "Andrew Tu"
date: "2022-11-07"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
# 
# 
# county_SVI = read_csv(
#   url('https://svi.cdc.gov/Documents/Data/2020_SVI_Data/CSV/SVI2020_US_COUNTY.csv')
#   )%>%
#   write_csv('SVI2020_US_COUNTY.csv')
# 
# census_SVI = read_csv(url('https://svi.cdc.gov/Documents/Data/2020_SVI_Data/CSV/SVI2020_US.csv'))%>%
#   write_csv('SVI2020_US.csv')
# 
# CDI_data = read_csv(url('https://data.cdc.gov/api/views/g4ie-h725/rows.csv'))%>%
#   write_csv('CDI_data.csv')

county_SVI = read_csv(
  url('https://svi.cdc.gov/Documents/Data/2018_SVI_Data/CSV/SVI2018_US_COUNTY.csv')
  )%>%
  write_csv('SVI2018_US_COUNTY.csv')



#census_SVI = read_csv('SVI2020_US.csv')
county_SVI = read_csv('SVI2018_US_COUNTY.csv')

# CDI_fulldata = read_csv('CDI_data.csv')%>%
#   filter(YearEnd == 2018)%>%
#   write_csv('CDI_2018.csv')

CDI_data = read_csv('CDI_2018.csv')
```


```{r 2018}
CDI_data%>%
  filter(Topic == 'Cardiovascular Disease')%>%
  #group_by(Question)%>%
  filter(Question =='Mortality from total cardiovascular diseases')%>%
  filter(DataValueTypeID == 'AGEADJRATE')%>%
  filter(is.na(DatavalueFootnote))
```


```{r gender difference rate of death from heart disease}

heart = CDI_data%>%
  filter(Topic == 'Cardiovascular Disease')%>%
  #group_by(Question)%>%
  filter(Question =='Mortality from total cardiovascular diseases')%>%
  filter(DataValueTypeID == 'AGEADJRATE')%>%
  filter(is.na(DatavalueFootnote))%>%
  select(LocationAbbr,Stratification1,DataValue)%>%
  pivot_wider(names_from = Stratification1,values_from = DataValue)%>%
  mutate(gender_diff = Male-Female)
# heart = CDI_fulldata%>%
#   filter(YearEnd == 2018)%>%
#   filter(Topic == 'Cardiovascular Disease')%>%
#   group_by(Question)%>%
#   count()

# CDI_fulldata%>%
# 
#   group_by(Topic)%>%
#   count()
```
